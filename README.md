## Введение

Язык IL (Instruction List) является одним из пяти языков программирования, определенных стандартом IEC 61131-3 для программируемых логических контроллеров (PLC).

# Интерпретатор IL для языка IEC 61131-3

Этот проект реализует интерпретатор для языка программирования Instruction List (IL) стандарта IEC 61131-3 (МЭК 61131-3). Интерпретатор написан на языке Python и предназначен для выполнения программ на IL, он поддерживает различные арифметические, логические и управляющие операции.

## Содержание

- [Введение](#введение)
- [Особенности](#особенности)
- [Установка](#установка)
- [Использование](#использование)
  - [Запуск интерпретатора](#запуск-интерпретатора)
  - [Тестирование](#тестирование)
- [Команды IL](#команды-il)
- [Примеры](#примеры)
- [Лицензия](#лицензия)

## Особенности

- Поддержка арифметических операций: ADD, SUB, MUL, DIV, MOD
- Поддержка логических операций: AND, OR, XOR, NOT, ANDN, ORN, XORN
- Поддержка управления потоком выполнения: JMP, JMPC, JMPNC
- Поддержка установки и сброса переменных: S, R
- Легкость расширения дополнительными командами
- Включает парсер для программ на IL
- Вывод отладочной информации о состоянии регистров

## Установка

Для установки интерпретатора просто клонируйте репозиторий.

## Использование

### Запуск интерпретатора

Чтобы запустить интерпретатор с программой на IL, вы можете создать экземпляр класса `ILInterpreter`, загрузить программу и выполнить её.

```python
from il_interpreter import ILInterpreter

program = """
LD 5
ST A
ADD 10
ST B
"""

interpreter = ILInterpreter()
interpreter.load_program(program)
interpreter.run()

print(interpreter.registers)  # Вывод состояния регистров после выполнения
```

### Тестирование

Этот проект включает набор модульных тестов для проверки функциональности интерпретатора. Тесты находятся в файле `test_il_interpreter.py`. Чтобы запустить тесты, просто выполните этот файл:

```sh
python test_il_interpreter.py
```

Тесты выведут результаты для каждого тестового случая и подтвердят, что все тесты пройдены.

## Команды IL

Интерпретатор поддерживает следующие команды IL:

- **LD <value>**: Загрузить значение в регистр ACC.
- **ST <variable>**: Сохранить значение регистра ACC в переменную.
- **ADD <value>**: Добавить значение к регистру ACC.
- **SUB <value>**: Вычесть значение из регистра ACC.
- **MUL <value>**: Умножить регистр ACC на значение.
- **DIV <value>**: Разделить регистр ACC на значение.
- **MOD <value>**: Выполнить операцию деления по модулю для регистра ACC.
- **AND <value>**: Выполнить побитовую операцию AND для регистра ACC с значением.
- **OR <value>**: Выполнить побитовую операцию OR для регистра ACC с значением.
- **XOR <value>**: Выполнить побитовую операцию XOR для регистра ACC с значением.
- **NOT**: Выполнить побитовую операцию NOT для регистра ACC.
- **ANDN <value>**: Выполнить побитовую операцию AND с инверсией значения.
- **ORN <value>**: Выполнить побитовую операцию OR с инверсией значения.
- **XORN <value>**: Выполнить побитовую операцию XOR с инверсией значения.
- **S <variable>**: Установить переменную в True, если ACC не равен нулю.
- **R <variable>**: Сбросить переменную в False.
- **JMP <label>**: Перейти к метке.
- **JMPC <label>**: Условный переход к метке, если ACC не равен нулю.
- **JMPNC <label>**: Условный переход к метке, если ACC равен нулю.

## Примеры

### Простая арифметическая программа

```python
program = """
LD 10
ADD 5
ST A
LD 10
SUB 3
ST B
"""

interpreter = ILInterpreter()
interpreter.load_program(program)
interpreter.run()

print(interpreter.registers)  # Ожидаемый вывод: {'ACC': 7, 'A': 15, 'B': 7}
```

### Логические операции

```python
program = """
LD 16#F0
AND 16#0F
ST A
LD 16#F0
OR 16#0F
ST B
"""

interpreter = ILInterpreter()
interpreter.load_program(program)
interpreter.run()

print(interpreter.registers)  # Ожидаемый вывод: {'ACC': 255, 'A': 0, 'B': 255}
```

### Управление потоком выполнения

```python
program = """
LD 1
JMP Skip
LD 0
ST A
Skip: LD 1
ST B
"""

interpreter = ILInterpreter()
interpreter.load_program(program)
interpreter.run()

print(interpreter.registers)  # Ожидаемый вывод: {'ACC': 1, 'A': None, 'B': 1}
```

## Лицензия

Этот проект лицензирован под лицензией MIT. См. файл [LICENSE](LICENSE) для получения подробной информации.